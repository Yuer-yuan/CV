# Hybrid Image
2012522 郭坤昌 计算机科学与技术

混合图像的解释随观察距离的不同而发生变化

混合图像的设计——使用高斯滤波分别得到高通和低通的图像，分隔点在强度的一半

人能很快地对图像建立理解——首先分析整体结构，再结合局部的空间分布。图像中的低频部分，首先被对比并送到大脑中处理，因此决定了早期视觉的处理

对于一个给定的观察距离或者时间频率，一个特定空间频率的子段决定着视觉处理的结果。高通滤波后的图像必须具有显著的特征能够与低通图像相互关联，否则低通图像仍然具有很强的主导作用

正确选择截断频率，使两张图片能量重叠小

合成显著混合图像的机制：

1. 相互关联强
2. ？跨范围且与其他边缘无关的边缘会被当成噪声

扩展：

更多图像的混合

应用：

混合图像，当一种感知占主导地位时，有意识地切换到另一种解释几乎是不可能的。只有当观看距离发生变化时，我们才能切换到另一种解释。在混合图像中，重要的是替代图像被视为噪声（缺乏内部组织）或者它与主要子带混合。感知分组规则调节混合图像的有效性。低空间频率（斑点）缺乏对物体形状和区域边界的精确定义，这需要视觉系统将斑点组合在一起以形成对粗尺度的有意义的解释。当观察者看到模棱两可的形式时，他们会以最简单的方式解释元素。观察者更喜欢元素更少而不是更多的排列，具有对称而不是不对称的构图，并且通常尊重其他格式塔感知规则。

低空间频率中图案的对称性和重复性是不好的：它们形成了一种很难在感知上消除的强烈感知。如果高空间频率的图像缺乏同样强烈的分组线索，对应于低空间频率的图像解释将始终可用，
即使从近距离观看。通过引入意外对齐，可以减少一个空间通道对另一个空间通道的影响。例如，在图 2 中，大象的顶部（低空间频率）与地平线（低空间频率和高空间频率）对齐。因此，当近距离观看图像时，大象的顶部边缘可以用一些细小的边缘来解释。这降低了大象的显着性。图 3 显示了混合图像的几个例子，在低空间频率和高空间频率之间具有不同程度的一致性。
颜色提供了非常强大的分组提示，可用于创建更具吸引力的错觉。例如，在图 4 中，颜色仅在高空间频率中使用，以增强自行车的效果，并在近距离观察图像时加强对摩托车作为阴影的解释。
图 5 说明了正确选择滤波器截止频率的重要性。在图 5.a 中，两个滤波器都有很强的重叠，因此，两个面之间没有干净的过渡。对于图 5.b 中的混合图像，两个滤波器几乎没有重叠。结果是生成更清晰的图像



明确的解释（近看像女人，远看像男人）。当图像未完全对齐时，这一点尤为重要。一个有趣的观察是，当图像构建得当时，观察者似乎将蒙版图像感知为噪声。混合图像打破了真实世界自然图像的一个重要统计特性（图 6），即连续空间尺度上通带滤波器输出之间的相关性。图 6.a 显示了在自然图像的拉普拉斯金字塔的不同层次之间获得的互相关矩阵。在一个尺度上发现的边缘与在较低和较高尺度上发现的边缘相关。当叠加两个图像时获得相同的结果（添加透明度）。在这种情况下，没有一个简单的过滤器来分离两个图像（并且两个图像的感知混合独立于我们观察图像的距离）。图 6.c 显示了当图像模糊（截止频率为 16c/i）然后被加性白噪声破坏时获得的相关矩阵。相关矩阵揭示了哪些尺度受噪声支配，因为它们不具有我们期望从自然图像中获得的跨尺度相关性。在混合图像的情况下，相关矩阵（图 6.d）揭示了两组的存在。图 7 显示了应用于图 5.b 中的混合图像的拉普拉斯金字塔的输出。低频通道和高频通道看到不同的图像。请注意，每个子带本身也是一个混合图像。如果离开页面，您会看到子带一个接一个地采用低尺度的标识。在阅读距离上，最上面一行的四个图像被解读为一个生气的人；最下面，一个严厉的女人。当您从图像中退后一步时，您会看到愤怒的人的脸开始出现在更多的子波段中。每个子带的比例越精细，您必须走得越远才能看到图像的切换。总之，可以利用两

在两个尺度的边缘之间，以便它们混合。第二个事实是，与跨尺度的其他边缘不相关的剩余边缘可以被视为噪声。这是图 5.b 中的情况，其中有一个非常引人注目的跨尺度边缘混合，但是，当近距离查看图像时，似乎存在一些低空间频率噪声



## 实验设计



## 实验过程

### 高斯滤波

#### 计算高斯核

滤波使用的高斯核通过高斯函数计算得到。需要指定参数卷积核大小$ksize$大于0的奇数，标准差$\sigma$可通过手动指定或通过公式计算得到。卷积核维度范围为1或2，对于二维卷积核，在$x$和$y$方向有相同标准差。

以下给出基于高斯函数的卷积核计算公式，其中$\mu$为卷积核中心点在每个方向上的坐标。

一维高斯核计算公式如下：
$$
p(x) = \frac{1}{\sqrt{2\pi \sigma^2}}e^{-\frac{(x-\mu)^2}{2 \sigma^2}}
$$
二维高斯核计算公式如下：
$$
p(x) = \frac{1}{2\pi \sigma^2}e^{-\frac{(x-\mu)^2 + (y-\mu)^2}{2 \sigma^2}}
$$
$\sigma$未指定时，参照OpenCV的计算[getGaussianKernel](https://docs.opencv.org/4.7.0/d4/d86/group__imgproc__filter.html#gac05a120c1ae92a6060dd0db190a61afa)，其计算公式为：
$$
\sigma = 0.3 \times (0.5 \times (ksize-1) -1) + 0.8
$$
主要对应代码如下（有精简）

```c++
cv::Mat gen_gaussian_kernel(int size, double sigma, int dim) {
	// calc sigma if not assigned
    if (sigma < 0) {
        sigma = 0.3 * ((size - 1) * 0.5 - 1) + 0.8;
    }
    // calc kernel elements
    switch (dim)
    {
        case 1: {
            kernel = cv::Mat::zeros(1, size, CV_64FC1);
            double *p = kernel.ptr<double>(0);
            for (int i = 0; i < size; i++) {
                p[i] = exp(-0.5 * pow((i - (size - 1) / 2) / sigma, 2)) / (sigma * sqrt(2 * CV_PI));
            }
            break;
        }
        case 2: {
            kernel = cv::Mat::zeros(size, size, CV_64FC1);
            double *p;
            for (int i = 0; i < size; i++) {
                p = kernel.ptr<double>(i);
                for (int j = 0; j < size; j++) {
                    p[j] = exp(-0.5 * (pow((i - (size - 1) / 2) / sigma, 2) + pow((j - (size - 1) / 2) / sigma, 2))) / (2 * CV_PI * sigma * sigma);
                }
            }
            break;
        }
    default:
        break;
    }
    return kernel;
}
```

### 计算卷积



